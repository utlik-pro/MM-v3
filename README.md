# üé§ MinskMir ElevenLabs Proxy Iframe

![Next.js](https://img.shields.io/badge/Next.js-14-black)
![TypeScript](https://img.shields.io/badge/TypeScript-5-blue)
![Vercel](https://img.shields.io/badge/Deploy-Vercel-black)
![ElevenLabs](https://img.shields.io/badge/AI-ElevenLabs-purple)

–ü–æ–ª–Ω–æ—Å—Ç—å—é –∫–∞—Å—Ç–æ–º–Ω—ã–π iframe –≤–∏–¥–∂–µ—Ç –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ ElevenLabs –Ω–∞ —Å–∞–π—Ç MinskMir. –†–µ—à–µ–Ω–∏–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é **—Å–∫—Ä—ã–≤–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ ElevenLabs** –æ—Ç –∫–æ–Ω–µ—á–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—è –±—Ä–µ–Ω–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å MinskMir.

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- üîí **–ü–æ–ª–Ω–æ–µ —Å–æ–∫—Ä—ã—Ç–∏–µ ElevenLabs** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ –±—Ä–µ–Ω–¥–∏–Ω–≥ MinskMir
- üõ°Ô∏è **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - API –∫–ª—é—á–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –Ω–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –∫–ª–∏–µ–Ω—Ç—É
- ‚ö° **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É** - rate limiting, CORS, comprehensive error handling
- üì± **–û—Ç–∑—ã–≤—á–∏–≤—ã–π –¥–∏–∑–∞–π–Ω** - –∏–¥–µ–∞–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- üé® **–ö–∞—Å—Ç–æ–º–Ω—ã–π UI** - –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ —Ä–æ–¥–Ω–∞—è –∫–Ω–æ–ø–∫–∞ "–ü–æ–∑–≤–æ–Ω–∏—Ç—å" –≤–∞—à–µ–≥–æ —Å–∞–π—Ç–∞
- üöÄ **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è Vercel** - –æ–¥–∏–Ω –∫–ª–∏–∫ –¥–ª—è –¥–µ–ø–ª–æ—è

## üéØ –ß—Ç–æ –ø–æ–ª—É—á–∞–µ—Ç—Å—è

| –î–æ (–æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π ElevenLabs) | –ü–æ—Å–ª–µ (–Ω–∞—à –ø—Ä–æ–∫—Å–∏) |
|---|---|
| `<elevenlabs-convai agent-id="..."></elevenlabs-convai>` | `<iframe src="your-domain.vercel.app/widget">` |
| –í–∏–¥–Ω—ã ElevenLabs –ª–æ–≥–æ—Ç–∏–ø—ã –∏ –±—Ä–µ–Ω–¥–∏–Ω–≥ | –¢–æ–ª—å–∫–æ –±—Ä–µ–Ω–¥–∏–Ω–≥ MinskMir |
| API –∫–ª—é—á–∏ –≤ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º –∫–æ–¥–µ | API –∫–ª—é—á–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ |
| –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö CDN | –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –∫–æ–¥–æ–º |

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –î–µ–ø–ª–æ–π –Ω–∞ Vercel

[![Deploy with Vercel](https://vercel.com/button)](https://vercel.com/new/clone?repository-url=https://github.com/your-username/minskmir-voice-widget)

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í Vercel Dashboard –¥–æ–±–∞–≤—å—Ç–µ:

```env
ELEVENLABS_API_KEY=sk_079e94528d5861306a40b2083311d6697bcc49e3933991d8
ELEVENLABS_AGENT_ID=agent_01jxkr0mstfk6ttayjsghjm7xc
ALLOWED_ORIGINS=https://minskmir.by,https://www.minskmir.by
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=3600
```

### 3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–∞ —Å–∞–π—Ç

```html
<!-- –ü—Ä–æ—Å—Ç–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è -->
<iframe 
  src="https://your-project.vercel.app/widget"
  width="220"
  height="60"
  frameborder="0"
  allow="microphone"
  style="border-radius: 30px;">
</iframe>
```

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Frontend**: Next.js 14, React 18, TypeScript
- **Styling**: TailwindCSS —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ —Å—Ç–∏–ª—è–º–∏ MinskMir
- **API Integration**: ElevenLabs Conversational AI SDK
- **Deployment**: Vercel (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ)
- **Security**: Rate limiting, CORS, secure API proxy

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
‚îú‚îÄ‚îÄ pages/
‚îÇ   ‚îú‚îÄ‚îÄ api/elevenlabs/          # API –ø—Ä–æ–∫—Å–∏ endpoints
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ signed-url.ts        # –ü–æ–ª—É—á–µ–Ω–∏–µ signed URL
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ conversation-token.ts # –ü–æ–ª—É—á–µ–Ω–∏–µ conversation token
‚îÇ   ‚îú‚îÄ‚îÄ widget.tsx               # Iframe –≤–∏–¥–∂–µ—Ç
‚îÇ   ‚îú‚îÄ‚îÄ index.tsx                # –î–µ–º–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îÇ   ‚îî‚îÄ‚îÄ _app.tsx                 # Next.js –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CallButton.tsx       # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–Ω–æ–ø–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ types/
‚îÇ       ‚îî‚îÄ‚îÄ elevenlabs.ts        # TypeScript —Ç–∏–ø—ã
‚îú‚îÄ‚îÄ styles/
‚îÇ   ‚îî‚îÄ‚îÄ globals.css              # –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏
‚îú‚îÄ‚îÄ .env.example                 # –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ vercel.json                  # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Vercel
‚îî‚îÄ‚îÄ INTEGRATION.md               # –ü–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
```

## üîß –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone https://github.com/your-username/minskmir-voice-widget.git
cd minskmir-voice-widget

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm install

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp .env.example .env.local

# –ó–∞–ø–æ–ª–Ω–∏—Ç–µ .env.local –≤–∞—à–∏–º–∏ API –∫–ª—é—á–∞–º–∏

# –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
npm run dev
```

–û—Ç–∫—Ä–æ–π—Ç–µ [http://localhost:3000](http://localhost:3000) –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–µ–º–æ.
–í–∏–¥–∂–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É [http://localhost:3000/widget](http://localhost:3000/widget).

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### Rate Limiting
- **100 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —á–∞—Å** –Ω–∞ IP –∞–¥—Ä–µ—Å
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### CORS Protection
- –°—Ç—Ä–æ–≥–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ `Origin` –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
- –†–∞–∑—Ä–µ—à–µ–Ω—ã —Ç–æ–ª—å–∫–æ –¥–æ–º–µ–Ω—ã –∏–∑ `ALLOWED_ORIGINS`
- –ó–∞—â–∏—Ç–∞ –æ—Ç cross-site attacks

### API Security
- API –∫–ª—é—á–∏ ElevenLabs –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –∫–ª–∏–µ–Ω—Ç—É
- –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–µ—Ä–Ω—ã–π –ø—Ä–æ–∫—Å–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### Health Check Endpoint

```bash
curl https://your-project.vercel.app/health
```

–û—Ç–≤–µ—Ç:
```json
{
  "status": "ok",
  "timestamp": "2024-01-20T10:30:00.000Z",
  "version": "1.0.0",
  "uptime": 12345,
  "environment": "production",
  "services": {
    "elevenlabs": "available"
  }
}
```

### Vercel Analytics

–í–∫–ª—é—á–∏—Ç–µ Vercel Analytics –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –û—à–∏–±–æ–∫
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API
- Geographic —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## üé® –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è

### –†–∞–∑–º–µ—Ä—ã –≤–∏–¥–∂–µ—Ç–∞

```html
<!-- –ú–∞–ª–µ–Ω—å–∫–∏–π -->
<iframe src="..." width="180" height="50"></iframe>

<!-- –°—Ä–µ–¥–Ω–∏–π (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π) -->
<iframe src="..." width="220" height="60"></iframe>

<!-- –ë–æ–ª—å—à–æ–π -->
<iframe src="..." width="280" height="80"></iframe>
```

### –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

```html
<!-- –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è (–ø–ª–∞–≤–∞—é—â–∞—è –∫–Ω–æ–ø–∫–∞) -->
<div style="position: fixed; bottom: 20px; right: 20px; z-index: 1000;">
  <iframe src="https://your-project.vercel.app/widget" 
          width="200" height="60" frameborder="0" allow="microphone"
          style="border-radius: 30px; box-shadow: 0 4px 20px rgba(0,0,0,0.3);">
  </iframe>
</div>
```

## üêõ Troubleshooting

### –í–∏–¥–∂–µ—Ç –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `ALLOWED_ORIGINS`
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ API –∫–ª—é—á ElevenLabs –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ health endpoint

### –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É
1. –°–∞–π—Ç –¥–æ–ª–∂–µ–Ω –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –ø–æ HTTPS
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ `allow="microphone"` –¥–æ–±–∞–≤–ª–µ–Ω –≤ iframe
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±—Ä–∞—É–∑–µ—Ä–∞

### Rate Limiting –æ—à–∏–±–∫–∏
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â–∏–µ –ª–∏–º–∏—Ç—ã
curl -I https://your-project.vercel.app/api/elevenlabs/signed-url
```

## üìù API Reference

### GET /health
–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞

### POST /api/elevenlabs/signed-url
–ü–æ–ª—É—á–µ–Ω–∏–µ signed URL –¥–ª—è ElevenLabs conversation

### POST /api/elevenlabs/conversation-token
–ü–æ–ª—É—á–µ–Ω–∏–µ conversation token –¥–ª—è WebRTC –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. –°–æ–∑–¥–∞–π—Ç–µ feature branch (`git checkout -b feature/amazing-feature`)
3. –ö–æ–º–º–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π (`git commit -m 'Add amazing feature'`)
4. Push –≤ branch (`git push origin feature/amazing-feature`)
5. –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request

## üìú –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ª–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ MIT License - —Å–º. [LICENSE](LICENSE) —Ñ–∞–π–ª –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- üìñ [–ü–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏](INTEGRATION.md)
- üêõ [–°–æ–∑–¥–∞—Ç—å issue](https://github.com/your-username/minskmir-voice-widget/issues)
- üí¨ [Discussions](https://github.com/your-username/minskmir-voice-widget/discussions)
- üìß Email: support@minskmir.by

## üôè –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

- [ElevenLabs](https://elevenlabs.io) –∑–∞ –ø–æ—Ç—Ä—è—Å–∞—é—â–∏–π Conversational AI API
- [Vercel](https://vercel.com) –∑–∞ –æ—Ç–ª–∏—á–Ω—É—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –¥–µ–ø–ª–æ—è
- [Next.js](https://nextjs.org) –∫–æ–º–∞–Ω–¥—É –∑–∞ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫

---

–°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è **MinskMir** | [minskmir.by](https://minskmir.by)

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–ª—É—á–∞—é—Ç –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –≥–æ–ª–æ—Å–æ–≤–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ, –¥—É–º–∞—è —á—Ç–æ —ç—Ç–æ —Ä–æ–¥–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è MinskMir, –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –≤—Å—é –º–æ—â—å ElevenLabs AI! üéâ 