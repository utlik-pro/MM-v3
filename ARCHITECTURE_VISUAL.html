<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>MinskMir Voice Agent - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞</title>
    <style>
        @page {
            margin: 2cm;
            @bottom-right {
                content: counter(page);
            }
        }
        
        body {
            font-family: 'DejaVu Sans', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
            page-break-before: always;
        }
        
        h1:first-of-type {
            page-break-before: avoid;
        }
        
        h2 {
            color: #34495e;
            border-bottom: 2px solid #95a5a6;
            padding-bottom: 8px;
            margin-top: 30px;
        }
        
        h3 {
            color: #555;
            margin-top: 20px;
        }
        
        .diagram-box {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            page-break-inside: avoid;
        }
        
        .flow-step {
            background: white;
            border: 2px solid #3498db;
            border-radius: 6px;
            padding: 15px;
            margin: 10px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .flow-arrow {
            text-align: center;
            font-size: 24px;
            color: #3498db;
            margin: 5px 0;
        }
        
        .tech-stack {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }
        
        .tech-item {
            background: #ecf0f1;
            padding: 15px;
            border-left: 4px solid #3498db;
            border-radius: 4px;
        }
        
        .tech-item strong {
            color: #2c3e50;
            display: block;
            margin-bottom: 5px;
        }
        
        .code-block {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            overflow-x: auto;
            margin: 15px 0;
            page-break-inside: avoid;
        }
        
        .table-container {
            overflow-x: auto;
            margin: 20px 0;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        th {
            background: #3498db;
            color: white;
            padding: 12px;
            text-align: left;
        }
        
        td {
            padding: 10px;
            border-bottom: 1px solid #dee2e6;
        }
        
        tr:nth-child(even) {
            background: #f8f9fa;
        }
        
        .workflow-diagram {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .workflow-step {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.3);
            padding: 20px;
            margin: 15px 0;
            border-radius: 8px;
        }
        
        .component-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 20px 0;
        }
        
        .component-card {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.2s;
        }
        
        .component-card h4 {
            color: #3498db;
            margin-top: 0;
        }
        
        .badge {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            margin: 5px 5px 5px 0;
        }
        
        .badge-primary { background: #3498db; color: white; }
        .badge-success { background: #2ecc71; color: white; }
        .badge-warning { background: #f39c12; color: white; }
        .badge-danger { background: #e74c3c; color: white; }
        
        .highlight-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }
        
        .info-box {
            background: #d1ecf1;
            border-left: 4px solid #17a2b8;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }
        
        .toc {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        .toc ul {
            list-style: none;
            padding-left: 0;
        }
        
        .toc li {
            padding: 8px 0;
            border-bottom: 1px solid #dee2e6;
        }
        
        .toc a {
            color: #3498db;
            text-decoration: none;
        }
        
        .architecture-layer {
            background: white;
            border: 2px solid #3498db;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            position: relative;
        }
        
        .architecture-layer::before {
            content: attr(data-layer);
            position: absolute;
            top: -12px;
            left: 20px;
            background: #3498db;
            color: white;
            padding: 4px 12px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
        }
    </style>
</head>
<body>

<h1>MinskMir Voice Agent</h1>
<h2>–î–µ—Ç–∞–ª—å–Ω–∞—è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –°–∏—Å—Ç–µ–º—ã</h2>

<div class="toc">
    <h3>–û–≥–ª–∞–≤–ª–µ–Ω–∏–µ</h3>
    <ul>
        <li><a href="#tech-stack">1. –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫</a></li>
        <li><a href="#data-flow">2. –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö</a></li>
        <li><a href="#components">3. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã</a></li>
        <li><a href="#api">4. API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã</a></li>
        <li><a href="#database">5. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö</a></li>
        <li><a href="#integrations">6. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏</a></li>
        <li><a href="#security">7. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö</a></li>
    </ul>
</div>

<h2 id="tech-stack">–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫</h2>

<div class="tech-stack">
    <div class="tech-item">
        <strong>Frontend</strong>
        <span class="badge badge-primary">Next.js 13+</span>
        <span class="badge badge-primary">TypeScript</span>
        <span class="badge badge-primary">Tailwind CSS</span>
        <span class="badge badge-primary">React Hooks</span>
    </div>
    
    <div class="tech-item">
        <strong>Backend</strong>
        <span class="badge badge-success">Next.js API Routes</span>
        <span class="badge badge-success">Node.js</span>
        <span class="badge badge-success">TypeScript</span>
    </div>
    
    <div class="tech-item">
        <strong>–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö</strong>
        <span class="badge badge-warning">Supabase</span>
        <span class="badge badge-warning">PostgreSQL</span>
        <span class="badge badge-warning">pgvector</span>
        <span class="badge badge-warning">Real-time</span>
    </div>
    
    <div class="tech-item">
        <strong>Voice AI & LLM</strong>
        <span class="badge badge-danger">ElevenLabs</span>
        <span class="badge badge-danger">GPT-5</span>
        <span class="badge badge-danger">TTS/STT</span>
        <span class="badge badge-danger">WebSocket</span>
    </div>
</div>

<h2 id="data-flow">–ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö</h2>

<h3>1. –ò–Ω–∏—Ü–∏–∞—Ü–∏—è –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∑–≤–æ–Ω–∫–∞</h3>

<div class="workflow-diagram">
    <div class="workflow-step">
        <h4>–®–∞–≥ 1: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞ —Å–∞–π—Ç–µ</h4>
        <p>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É "–ü–æ–∑–≤–æ–Ω–∏—Ç—å" –Ω–∞ –≤–µ–±-—Å–∞–π—Ç–µ bir.by</p>
    </div>
    
    <div class="flow-arrow">‚Üì</div>
    
    <div class="workflow-step">
        <h4>–®–∞–≥ 2: VoiceWidget.tsx</h4>
        <p>–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Ç–æ–∫–µ–Ω –¥–ª—è —Ä–∞–∑–≥–æ–≤–æ—Ä–∞ —á–µ—Ä–µ–∑ API</p>
        <code>POST /api/elevenlabs/conversation-token</code>
    </div>
    
    <div class="flow-arrow">‚Üì</div>
    
    <div class="workflow-step">
        <h4>–®–∞–≥ 3: API Route</h4>
        <p>1. –ü–æ–ª—É—á–∞–µ—Ç agentId –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è<br>
           2. –í—ã–∑—ã–≤–∞–µ—Ç ElevenLabs API<br>
           3. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç signed JWT token</p>
    </div>
    
    <div class="flow-arrow">‚Üì</div>
    
    <div class="workflow-step">
        <h4>–®–∞–≥ 4: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è</h4>
        <p>VoiceWidget –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç ElevenLabs SDK –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ</p>
    </div>
    
    <div class="flow-arrow">‚Üì</div>
    
    <div class="workflow-step">
        <h4>–®–∞–≥ 5: ElevenLabs Platform</h4>
        <p>–ù–∞—á–∏–Ω–∞–µ—Ç—Å—è real-time –≥–æ–ª–æ—Å–æ–≤–æ–π —Ä–∞–∑–≥–æ–≤–æ—Ä —Å AI –∞–≥–µ–Ω—Ç–æ–º</p>
    </div>
</div>

<h3>2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞</h3>

<div class="diagram-box">
    <h4 style="text-align: center; color: #3498db;">ElevenLabs Pipeline</h4>
    
    <div class="architecture-layer" data-layer="1. Audio Input">
        <strong>–í—Ö–æ–¥—è—â–∏–π –∞—É–¥–∏–æ –ø–æ—Ç–æ–∫</strong>
        <ul>
            <li>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≥–æ–≤–æ—Ä–∏—Ç –≤ –º–∏–∫—Ä–æ—Ñ–æ–Ω</li>
            <li>–ê—É–¥–∏–æ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ WebSocket</li>
            <li>–õ–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å: ~200-300ms</li>
        </ul>
    </div>
    
    <div class="flow-arrow">‚Üì</div>
    
    <div class="architecture-layer" data-layer="2. Speech-to-Text">
        <strong>–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏ (STT)</strong>
        <ul>
            <li>–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è: ElevenLabs Turbo STT</li>
            <li>–ü–æ–¥–¥–µ—Ä–∂–∫–∞ 30+ —è–∑—ã–∫–æ–≤</li>
            <li>Output: "–Ø —Ö–æ—á—É —É–∑–Ω–∞—Ç—å –æ –≤–∞—à–∏—Ö –∫–≤–∞—Ä—Ç–∏—Ä–∞—Ö"</li>
        </ul>
    </div>
    
    <div class="flow-arrow">‚Üì</div>
    
    <div class="architecture-layer" data-layer="3. Context Loading">
        <strong>–ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞</strong>
        <ul>
            <li>–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –∞–≥–µ–Ω—Ç–∞ (RAG)</li>
            <li>–ò—Å—Ç–æ—Ä–∏—è —Ä–∞–∑–≥–æ–≤–æ—Ä–∞</li>
            <li>Custom tools & functions</li>
        </ul>
    </div>
    
    <div class="flow-arrow">‚Üì</div>
    
    <div class="architecture-layer" data-layer="4. LLM GPT-5">
        <strong>–û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–∞</strong>
        <ul>
            <li>–ê–Ω–∞–ª–∏–∑ –∑–∞–ø—Ä–æ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</li>
            <li>–ü–æ–∏—Å–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π</li>
            <li>–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞</li>
            <li>Output: "–£ –Ω–∞—Å –µ—Å—Ç—å –∫–≤–∞—Ä—Ç–∏—Ä—ã –æ—Ç 45 –¥–æ 120 –º¬≤..."</li>
        </ul>
    </div>
    
    <div class="flow-arrow">‚Üì</div>
    
    <div class="architecture-layer" data-layer="5. Text-to-Speech">
        <strong>–°–∏–Ω—Ç–µ–∑ —Ä–µ—á–∏ (TTS)</strong>
        <ul>
            <li>–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è: ElevenLabs TTS v3</li>
            <li>–ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–∞—è —Ä–µ—á—å —Å —ç–º–æ—Ü–∏—è–º–∏</li>
            <li>Streaming audio generation</li>
        </ul>
    </div>
    
    <div class="flow-arrow">‚Üì</div>
    
    <div class="architecture-layer" data-layer="6. Audio Output">
        <strong>–í–æ–∑–≤—Ä–∞—Ç –∞—É–¥–∏–æ</strong>
        <ul>
            <li>–ê—É–¥–∏–æ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ WebSocket</li>
            <li>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–ª—ã—à–∏—Ç –æ—Ç–≤–µ—Ç AI –∞–≥–µ–Ω—Ç–∞</li>
        </ul>
    </div>
</div>

<h2 id="components">–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã</h2>

<div class="component-grid">
    <div class="component-card">
        <h4>VoiceWidget.tsx</h4>
        <p><strong>–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:</strong> –ì–ª–∞–≤–Ω—ã–π –≤–∏–¥–∂–µ—Ç –¥–ª—è –≥–æ–ª–æ—Å–æ–≤—ã—Ö –∑–≤–æ–Ω–∫–æ–≤</p>
        <p><strong>–§—É–Ω–∫—Ü–∏–∏:</strong></p>
        <ul>
            <li>–ò–Ω–∏—Ü–∏–∞—Ü–∏—è –∑–≤–æ–Ω–∫–∞</li>
            <li>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º</li>
            <li>WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ</li>
        </ul>
    </div>
    
    <div class="component-card">
        <h4>AINotificationWidget</h4>
        <p><strong>–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:</strong> –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –ª–∏–¥–∞—Ö</p>
        <p><strong>–§—É–Ω–∫—Ü–∏–∏:</strong></p>
        <ul>
            <li>Polling –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫</li>
            <li>Badge —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º</li>
            <li>–ù–∞–≤–∏–≥–∞—Ü–∏—è –∫ –ª–∏–¥–∞–º</li>
        </ul>
    </div>
    
    <div class="component-card">
        <h4>AudioPlayer</h4>
        <p><strong>–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:</strong> –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π</p>
        <p><strong>–§—É–Ω–∫—Ü–∏–∏:</strong></p>
        <ul>
            <li>–ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ signed URL</li>
            <li>–ö–æ–Ω—Ç—Ä–æ–ª—ã: play, pause</li>
            <li>–ü—Ä–æ–≥—Ä–µ—Å—Å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è</li>
        </ul>
    </div>
</div>

<h2 id="database">–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö</h2>

<h3>Supabase PostgreSQL Schema</h3>

<div class="table-container">
    <table>
        <thead>
            <tr>
                <th>–¢–∞–±–ª–∏—Ü–∞</th>
                <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
                <th>–ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><strong>Lead</strong></td>
                <td>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ª–∏–¥–∞—Ö</td>
                <td>id, name, phone, email, status, source</td>
            </tr>
            <tr>
                <td><strong>Conversation</strong></td>
                <td>–ó–∞–ø–∏—Å–∏ —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤</td>
                <td>id, conversationId, leadId, transcript, recordingUrl</td>
            </tr>
            <tr>
                <td><strong>KnowledgeBase</strong></td>
                <td>–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –¥–ª—è AI</td>
                <td>id, name, type, content, agentIds</td>
            </tr>
            <tr>
                <td><strong>apartments</strong></td>
                <td>–î–∞–Ω–Ω—ã–µ –æ –∫–≤–∞—Ä—Ç–∏—Ä–∞—Ö (RAG)</td>
                <td>id, address, price, embedding (vector), source</td>
            </tr>
        </tbody>
    </table>
</div>

<h3>RAG Vector Search</h3>

<div class="info-box">
    <h4>–í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ —Å pgvector</h4>
    <p><strong>–ú–æ–¥–µ–ª—å embeddings:</strong> text-embedding-3-large (OpenAI)</p>
    <p><strong>–†–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å:</strong> 3072</p>
    <p><strong>–ò–Ω–¥–µ–∫—Å:</strong> HNSW (Hierarchical Navigable Small World)</p>
    <p><strong>–ú–µ—Ç—Ä–∏–∫–∞:</strong> Cosine Similarity</p>
</div>

<div class="code-block">
-- PostgreSQL —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞
CREATE OR REPLACE FUNCTION match_apartments(
  query_embedding vector(3072),
  match_threshold float,
  match_count int
)
RETURNS TABLE (
  apartment_id uuid,
  address text,
  price int,
  similarity float
)
LANGUAGE plpgsql AS $$
BEGIN
  RETURN QUERY
  SELECT
    a.id,
    a.address,
    a.price,
    1 - (a.embedding <=> query_embedding) as similarity
  FROM apartments a
  WHERE 1 - (a.embedding <=> query_embedding) > match_threshold
  ORDER BY a.embedding <=> query_embedding
  LIMIT match_count;
END;
$$;
</div>

<h2 id="security">–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö</h2>

<h3>–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤—É –†–ë</h3>

<div class="highlight-box">
    <h4>–ù–æ—Ä–º–∞—Ç–∏–≤–Ω–æ-–ø—Ä–∞–≤–æ–≤–∞—è –±–∞–∑–∞:</h4>
    <ul>
        <li>–ó–∞–∫–æ–Ω –†–ë ‚Ññ 99-–ó ¬´–û –∑–∞—â–∏—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö¬ª</li>
        <li>–£–∫–∞–∑ –ü—Ä–µ–∑–∏–¥–µ–Ω—Ç–∞ –†–ë ‚Ññ 383</li>
        <li>–ü–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –°–æ–≤–µ—Ç–∞ –ú–∏–Ω–∏—Å—Ç—Ä–æ–≤ –†–ë ‚Ññ 568</li>
    </ul>
    <p><strong>–û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–µ—Ä:</strong> –†–µ—Å–ø—É–±–ª–∏–∫–∞ –ë–µ–ª–∞—Ä—É—Å—å (–¥–∞—Ç–∞-—Ü–µ–Ω—Ç—Ä –Ω–∞ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ –†–ë)</p>
</div>

<h3>–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö</h3>

<div class="table-container">
    <table>
        <thead>
            <tr>
                <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                <th>–î–∞–Ω–Ω—ã–µ</th>
                <th>–°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><strong>–û–±—â–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ</strong></td>
                <td>–§–ò–û, —Ç–µ–ª–µ—Ñ–æ–Ω, email</td>
                <td>–î–æ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ + 1 –≥–æ–¥</td>
            </tr>
            <tr>
                <td><strong>–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ</strong></td>
                <td>–ê—É–¥–∏–æ –∑–∞–ø–∏—Å–∏, —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç—ã</td>
                <td>90 –¥–Ω–µ–π (–∞—É–¥–∏–æ), 2 –≥–æ–¥–∞ (—Ç–µ–∫—Å—Ç)</td>
            </tr>
            <tr>
                <td><strong>–û–±–µ–∑–ª–∏—á–µ–Ω–Ω—ã–µ</strong></td>
                <td>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, –º–µ—Ç—Ä–∏–∫–∏</td>
                <td>–ë–µ—Å—Å—Ä–æ—á–Ω–æ</td>
            </tr>
        </tbody>
    </table>
</div>

<h3>–ú–µ—Ä—ã –∑–∞—â–∏—Ç—ã –¥–∞–Ω–Ω—ã—Ö</h3>

<div class="component-grid">
    <div class="component-card">
        <h4>üîí –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ</h4>
        <ul>
            <li>HTTPS/TLS 1.3 –≤ —Ç—Ä–∞–Ω–∑–∏—Ç–µ</li>
            <li>AES-256 –≤ –ø–æ–∫–æ–µ</li>
            <li>WSS –¥–ª—è WebSocket</li>
        </ul>
    </div>
    
    <div class="component-card">
        <h4>üë§ –ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞</h4>
        <ul>
            <li>Row Level Security (RLS)</li>
            <li>JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è</li>
            <li>IP whitelist –¥–ª—è admin</li>
        </ul>
    </div>
    
    <div class="component-card">
        <h4>üìä –ê—É–¥–∏—Ç</h4>
        <ul>
            <li>–ñ—É—Ä–Ω–∞–ª –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π</li>
            <li>–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞</li>
            <li>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤</li>
        </ul>
    </div>
</div>

<h3>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö</h3>

<div class="workflow-diagram">
    <h4>Vercel Cron Job: –ö–∞–∂–¥—ã–π —á–∞—Å (0 * * * *)</h4>
    
    <div class="workflow-step">
        <strong>1. Web Scraper (Puppeteer)</strong>
        <p>–ü–∞—Ä—Å–∏–Ω–≥ bir.by/apartments</p>
        <ul>
            <li>–ê–¥—Ä–µ—Å, —Ü–µ–Ω–∞, –ø–ª–æ—â–∞–¥—å, –∫–æ–º–Ω–∞—Ç—ã</li>
            <li>–≠—Ç–∞–∂, –æ–ø–∏—Å–∞–Ω–∏–µ, —Ñ–æ—Ç–æ</li>
        </ul>
    </div>
    
    <div class="flow-arrow">‚Üì</div>
    
    <div class="workflow-step">
        <strong>2. Diff Engine</strong>
        <p>–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π</p>
        <ul>
            <li>–ù–æ–≤—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è</li>
            <li>–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ü–µ–Ω—ã</li>
            <li>–£–¥–∞–ª–µ–Ω–Ω—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è</li>
        </ul>
    </div>
    
    <div class="flow-arrow">‚Üì</div>
    
    <div class="workflow-step">
        <strong>3. –í–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (OpenAI)</strong>
        <p>–°–æ–∑–¥–∞–Ω–∏–µ embeddings</p>
        <ul>
            <li>–ú–æ–¥–µ–ª—å: text-embedding-3-large</li>
            <li>–†–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å: 3072</li>
        </ul>
    </div>
    
    <div class="flow-arrow">‚Üì</div>
    
    <div class="workflow-step">
        <strong>4. –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è (Supabase pgvector)</strong>
        <p>–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –≤–µ–∫—Ç–æ—Ä–Ω—É—é –ë–î</p>
        <ul>
            <li>Upsert –æ–ø–µ—Ä–∞—Ü–∏–∏</li>
            <li>HNSW –∏–Ω–¥–µ–∫—Å</li>
        </ul>
    </div>
</div>

<div class="info-box">
    <h4>üìû –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h4>
    <p><strong>Email:</strong> privacy@bir.by</p>
    <p><strong>–°–∞–π—Ç:</strong> https://bir.by/privacy</p>
    <p><strong>–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:</strong> –ù–æ—è–±—Ä—å 2025</p>
</div>

</body>
</html>
